<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gentle Parenting App</title>
</head>
<body>
    <div class="container">
        <h1>Gentle Parenting App</h1>
        <label for="theme">Theme of Child's Infraction:</label>
        <select id="theme">
            <option value="misbehavior">Misbehavior</option>
            <option value="tantrums">Tantrums</option>
            <option value="acts of violence">Acts of Violence</option>
            <option value="rewards">Rewards</option>
        </select>
        <label for="severity">Severity Level:</label>
        <input type="range" id="severity" min="1" max="5" value="1">
        <button id="submitButton">Get Suggestion</button>
        <div id="response"></div>
    </div>

    <!-- TensorFlow.js code for sentiment analysis -->
    <div class="chatbox-container">
        <h2>Sentiment Analysis</h2>
        <textarea id="sentimentInput" placeholder="Type your message..."></textarea>
        <button id="analyzeButton">Analyze Sentiment</button>
        <div id="sentimentResult"></div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/universal-sentence-encoder"></script>
    <script>
        // TensorFlow.js code for sentiment analysis
        document.getElementById("analyzeButton").addEventListener("click", async function() {
            const inputText = document.getElementById("sentimentInput").value.trim();
            if (inputText === "") return;

            // Load the Universal Sentence Encoder model
            const model = await universalSentenceEncoder.load();

            // Embed the input text
            const embeddings = await model.embed(inputText);

            // Predict the sentiment
            const prediction = await model.predict(embeddings);

            // Display the sentiment result
            const sentiment = prediction.arraySync()[0][0];
            const sentimentResultElement = document.getElementById("sentimentResult");
            sentimentResultElement.textContent = `Sentiment: ${sentiment > 0.5 ? 'Positive' : 'Negative'}`;
        });
    </script>

    <script>
        // GentleParentingApp class
        class GentleParentingApp {
            constructor() {
                this.gentleSuggestions = {};
                this.generateSuggestions();
            }

            generateSuggestions() {
                // Suggestions for dealing with misbehavior
                this.gentleSuggestions["misbehavior"] = {
                    1: "Tell them what they did is wrong and why.",
                    2: "Tell them what they did is wrong and why.",
                    3: "Take a deep breath, watch your words, decide on a reasonable punishment, and talk to your child later.",
                    4: "Take a deep breath, watch your words, decide on a reasonable punishment, and talk to your child later.",
                    5: "Take five minutes to yourself to calm down. Then, calmly speak to someone for advice. Wait until you have calmed down before responding and finding out why they did what they did."
                };

                // Suggestions for handling tantrums
                this.gentleSuggestions["tantrums"] = {
                    1: "Offer comfort and reassurance.",
                    2: "Offer comfort and reassurance.",
                    3: "Stay calm, provide comfort and reassurance, and set clear limits.",
                    4: "Stay calm, provide comfort and reassurance, and set clear limits.",
                    5: "Stay calm, provide comfort and reassurance, and set clear limits."
                };

                // Suggestions for dealing with acts of violence
                this.gentleSuggestions["acts of violence"] = {
                    1: "Immediately intervene and remove the child from the situation.",
                    2: "Immediately intervene and remove the child from the situation.",
                    3: "Stay calm, express disapproval of the behavior, and provide alternatives to express frustration or anger.",
                    4: "Stay calm, express disapproval of the behavior, and provide alternatives to express frustration or anger.",
                    5: "Stay calm, express disapproval of the behavior, and provide alternatives to express frustration or anger."
                };

                // Suggestions for rewarding positive behavior
                this.gentleSuggestions["rewards"] = {
                    1: "Offer verbal praise and acknowledgment of the behavior.",
                    2: "Offer verbal praise and acknowledgment of the behavior.",
                    3: "Offer verbal praise, acknowledgment of the behavior, and a small reward.",
                    4: "Offer verbal praise, acknowledgment of the behavior, and a small reward.",
                    5: "Offer verbal praise, acknowledgment of the behavior, and a small reward."
                };
            }

            getSuggestionsForPrompt(theme, severity) {
                return this.gentleSuggestions[theme][severity];
            }
        }

        // Instantiate GentleParentingApp
        const app = new GentleParentingApp();

        // Add event listener to submit button
        document.getElementById("submitButton").addEventListener("click", function() {
            const theme = document.getElementById("theme").value;
            const severity = document.getElementById("severity").value;

            // Get suggestions based on the chosen theme and severity
            const suggestion = app.getSuggestionsForPrompt(theme, severity);

            // Display the suggestion
            document.getElementById("response").innerHTML = `Response to child's infraction:<br>- ${suggestion}`;
        });

        
    </script>
</body>
</html>
